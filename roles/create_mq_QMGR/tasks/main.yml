---

- name: print qmgr name
  ansible.builtin.command: echo "{{ qmgr_name }}"
  register: qmgrname

- debug:
   var: qmgrname.stdout

- name: Create MQ Queue Manager 
  tasks:
    - name: create task
      command: "{{ item }}"
      with_items: 
        - sudo su - mqm
        - crtmqm -lc -u  -q -p 2022 "{{ qmgr_name }}"
      register: crt_cmd   

- debug:
   var: crt_cmd.stdout

#- name: verify status
#  ansible.builtin.command: dspmq -m "{{ qmgr_name }}"
#  register: command_output

#- debug: msg="The status of QMGR {{ qmgr_name }} is:{{ command_output.stdout }}" 
    


#- name: Copy MQ queue manager config
#  copy:
#   src: METDEV.QUE.MGR.mqsc
#   dest: /var/mqm/config/
